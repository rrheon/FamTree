# Product Requirements Document (PRD)
# FamilyTree - 가족 소통 앱

## 1. 프로젝트 개요

### 1.1 제품명
**FamilyTree** - 가족이 매일 질문에 답하며 함께 성장하는 소통 앱

### 1.2 비전
"가족 구성원들이 매일의 질문을 통해 서로를 더 깊이 이해하고, 함께 성장하는 나무처럼 관계를 키워가는 플랫폼"

### 1.3 목표
- 가족 구성원 간의 일상적이고 의미 있는 소통 촉진
- 세대 간 이해와 공감대 형성
- 꾸준한 소통 습관 형성을 통한 가족 유대감 강화
- 시각적 성장 요소를 통한 성취감 제공

---

## 2. 타겟 사용자

### 2.1 주요 타겟
- **부모 세대**: 40-60대, 자녀들과 더 깊은 소통을 원하는 부모님
- **자녀 세대**: 20-40대, 바쁜 일상 속에서도 부모님과 소통하고 싶은 자녀들

### 2.2 사용자 페르소나

**페르소나 1: 김영희 (55세, 어머니)**
- 자녀들이 독립하여 소통이 줄어듦
- SNS는 어렵지만 간단한 질문-답변은 가능
- 자녀들의 일상과 생각을 알고 싶어함

**페르소나 2: 이민준 (32세, 아들)**
- 직장 생활로 바빠 부모님과 자주 연락 못함
- 부담 없는 방식으로 가족과 소통하고 싶음
- 간단한 질문으로 대화 시작하는 게 편함

---

## 3. 핵심 기능

### 3.1 인증 및 온보딩
- **회원가입/로그인**
  - 이메일 기반 간편 회원가입
  - 소셜 로그인 (Apple, Google)
  - 프로필 설정 (이름, 프로필 사진, 가족 내 역할)

- **가족 그룹 생성**
  - 최초 사용자가 가족 그룹 생성
  - 그룹명 설정 (예: "김씨네 가족", "우리 가족")
  - 씨앗 심기 애니메이션

### 3.2 구성원 관리
- **구성원 초대**
  - 초대 링크 생성 및 공유
  - 초대 코드 입력 방식
  - 카카오톡, 문자 등으로 초대장 전송

- **구성원 목록**
  - 가족 구성원 프로필 확인
  - 답변 상태 실시간 표시 (답변 완료/대기 중)
  - 구성원별 역할 표시 (아빠, 엄마, 아들, 딸 등)

### 3.3 일일 질문 시스템
- **질문 제공**
  - 매일 오전 11시 정각에 새로운 질문 도착
  - 푸시 알림으로 질문 도착 안내
  - 질문은 가족 관계를 깊게 하는 주제 중심

- **질문 카테고리**
  - 일상 & 취미: "최근 가장 행복했던 순간은?"
  - 추억 & 과거: "어린 시절 가장 기억에 남는 순간은?"
  - 가치관 & 생각: "인생에서 가장 중요하게 생각하는 가치는?"
  - 미래 & 계획: "올해 꼭 이루고 싶은 목표는?"
  - 감사 & 애정: "가족에게 가장 감사한 점은?"

- **질문 잠금 메커니즘**
  - 현재 질문에 답변하지 않으면 다음 질문으로 넘어가지 않음
  - 답변하지 않은 날은 건너뛰기 불가
  - 모든 구성원이 답변해야 다음 질문 해금

### 3.4 답변 시스템
- **답변 작성**
  - 텍스트 답변 (최대 500자)
  - 사진 첨부 가능 (선택)
  - 임시 저장 기능
  - 작성 중 자동 저장

- **답변 공개 메커니즘**
  - 모든 구성원이 답변 완료 전: 자신의 답변만 확인 가능
  - 모든 구성원이 답변 완료 후: 전체 답변 공개
  - 공개 시 푸시 알림 발송

- **답변 요청**
  - 답변한 사람이 미답변자에게 답변 요청 가능
  - 요청 시 푸시 알림 전송
  - 하루 1회 제한 (스팸 방지)

- **답변 확인**
  - 구성원별 답변 카드 형식으로 표시
  - 답변에 반응하기 (하트, 좋아요 등)
  - 댓글 기능 (선택적)

### 3.5 성장 시각화 (나무 키우기)
- **초기 상태**
  - 가족 그룹 생성 시 씨앗 심기
  - 첫 질문 답변 완료 시 새싹 발아

- **성장 단계**
  - 1-10일: 씨앗 → 새싹
  - 11-30일: 새싹 → 어린 나무
  - 31-60일: 어린 나무 → 청년 나무
  - 61-100일: 청년 나무 → 성목
  - 100일+: 성목 → 꽃 피는 나무

- **성장 요소**
  - 답변 완료 횟수에 따라 성장
  - 특별 이벤트 (모두 같은 날 답변, 연속 답변 등)에 따른 보너스
  - 애니메이션으로 성장 표현

- **성장 기록**
  - 타임라인으로 성장 과정 확인
  - 주요 마일스톤 달성 시 배지 획득
  - 성장 통계 (총 답변 수, 연속 답변 일수 등)

### 3.6 알림 시스템
- **푸시 알림**
  - 새로운 질문 도착 (매일 오전 11시)
  - 모든 구성원 답변 완료 (답변 공개)
  - 답변 요청 받음
  - 나무 성장 단계 도달

- **알림 설정**
  - 알림 on/off
  - 알림 시간 커스터마이징 (오전 11시 기본)
  - 알림 타입별 on/off

### 3.7 과거 질문 아카이브
- **질문 히스토리**
  - 날짜별로 과거 질문 및 답변 확인
  - 캘린더 뷰로 한눈에 보기
  - 특정 날짜 검색 및 필터링

- **추억 회고**
  - 1개월 전, 3개월 전 답변 다시 보기
  - 답변 변화 비교하기
  - 인상 깊은 답변 북마크

---

## 4. 사용자 시나리오

### 4.1 첫 사용 시나리오 (온보딩)

**민준(아들)의 시작:**
1. 앱 설치 후 이메일로 회원가입
2. 프로필 설정 (이름: 민준, 역할: 아들)
3. "우리 가족" 그룹 생성
4. 씨앗 심기 애니메이션 확인
5. 가족 초대 링크를 카카오톡으로 부모님께 전송
6. 첫 질문 확인: "최근 가장 행복했던 순간은?"
7. 답변 작성: "지난주 프로젝트가 성공적으로 끝났을 때..."
8. 답변 완료, 다른 가족들의 답변 대기 중 화면 표시

**영희(어머니)의 참여:**
1. 민준에게서 받은 초대 링크 클릭
2. 간단한 회원가입 (Apple 로그인)
3. 프로필 설정 (이름: 영희, 역할: 엄마)
4. "우리 가족" 그룹 자동 참여
5. 현재 질문 확인
6. 답변 작성: "오늘 장에서 싱싱한 채소를 샀을 때..."
7. 답변 완료

**아버지의 참여 후 답변 공개:**
1. 아버지도 답변 완료
2. 모든 구성원에게 "모두의 답변이 공개되었습니다!" 알림
3. 전체 답변 확인, 서로의 답변에 하트 반응
4. 새싹이 자라나는 애니메이션 확인

### 4.2 일상 사용 시나리오

**Day 5 - 아침:**
- 오전 11시, 모든 가족에게 새 질문 도착 알림
- 질문: "어린 시절 가장 기억에 남는 가족 여행은?"

**Day 5 - 점심:**
- 민준이 점심시간에 답변 작성
- 구성원 목록에서 민준만 답변 완료 표시

**Day 5 - 저녁:**
- 영희가 저녁에 답변 작성
- 아버지 아직 미답변 상태
- 민준이 아버지에게 "답변 요청" 버튼 클릭
- 아버지에게 "민준님이 답변을 기다리고 있어요!" 알림

**Day 5 - 밤:**
- 아버지가 답변 완료
- 모두에게 답변 공개 알림
- 가족들이 서로의 답변 확인하며 댓글 작성
- 나무가 한 단계 더 성장

### 4.3 성장 마일스톤 시나리오

**Day 30 달성:**
- "30일 연속 답변 완료!" 배지 획득
- 나무가 어린 나무에서 청년 나무로 성장
- 특별 애니메이션 효과
- 성장 기록 타임라인에 추가

---

## 5. 기술 요구사항

### 5.1 아키텍처
- **Clean Architecture** 적용
  - Domain Layer: 비즈니스 로직 및 엔티티
  - Data Layer: 저장소 및 네트워크
  - Presentation Layer: UI 및 상태 관리

- **TCA (The Composable Architecture)** 사용
  - 단방향 데이터 흐름
  - Feature 단위 모듈화
  - 테스트 가능한 구조

### 5.2 기술 스택
- **Frontend**: SwiftUI (iOS 16+)
- **상태 관리**: TCA (The Composable Architecture)
- **네트워크**: URLSession / Alamofire
- **로컬 저장소**: SwiftData / Core Data
- **푸시 알림**: APNs (Apple Push Notification service)
- **이미지**: Kingfisher (캐싱)
- **인증**: Firebase Authentication 또는 자체 서버

### 5.3 백엔드 (선택)
- **서버**: Node.js / Express 또는 Firebase
- **데이터베이스**: PostgreSQL / Firestore
- **스토리지**: S3 / Firebase Storage (이미지 저장)
- **푸시**: FCM (Firebase Cloud Messaging)

### 5.4 외부 서비스
- **소셜 로그인**: Apple Sign In, Google Sign In
- **분석**: Firebase Analytics
- **크래시 리포팅**: Firebase Crashlytics

---

## 6. 도메인 모델

### 6.1 핵심 엔티티

#### User (사용자)
```swift
struct User {
    let id: UUID
    let email: String
    let name: String
    let profileImageURL: String?
    let role: FamilyRole // 아빠, 엄마, 아들, 딸 등
    let createdAt: Date
}

enum FamilyRole: String {
    case father = "아빠"
    case mother = "엄마"
    case son = "아들"
    case daughter = "딸"
    case grandfather = "할아버지"
    case grandmother = "할머니"
    case other = "기타"
}
```

#### Family (가족 그룹)
```swift
struct Family {
    let id: UUID
    let name: String
    let members: [Member]
    let createdBy: UUID // User ID
    let createdAt: Date
    let inviteCode: String
    let treeProgress: TreeProgress
}
```

#### Member (구성원)
```swift
struct Member {
    let id: UUID
    let userId: UUID
    let familyId: UUID
    let role: FamilyRole
    let joinedAt: Date
    let isActive: Bool
}
```

#### Question (질문)
```swift
struct Question {
    let id: UUID
    let content: String
    let category: QuestionCategory
    let order: Int
    let createdAt: Date
}

enum QuestionCategory: String {
    case daily = "일상 & 취미"
    case memory = "추억 & 과거"
    case values = "가치관 & 생각"
    case future = "미래 & 계획"
    case gratitude = "감사 & 애정"
}
```

#### DailyQuestion (일일 질문)
```swift
struct DailyQuestion {
    let id: UUID
    let familyId: UUID
    let questionId: UUID
    let date: Date // 질문이 주어진 날짜
    let isCompleted: Bool // 모든 구성원이 답변 완료했는지
    let answers: [Answer]
}
```

#### Answer (답변)
```swift
struct Answer {
    let id: UUID
    let dailyQuestionId: UUID
    let userId: UUID
    let content: String
    let imageURL: String?
    let createdAt: Date
    let reactions: [Reaction]
    let comments: [Comment]
}
```

#### TreeProgress (나무 성장)
```swift
struct TreeProgress {
    let id: UUID
    let familyId: UUID
    let stage: TreeStage
    let totalAnswers: Int
    let consecutiveDays: Int
    let badges: [Badge]
    let lastUpdated: Date
}

enum TreeStage: Int {
    case seed = 0        // 씨앗 (0일)
    case sprout = 1      // 새싹 (1-10일)
    case sapling = 2     // 어린 나무 (11-30일)
    case youngTree = 3   // 청년 나무 (31-60일)
    case matureTree = 4  // 성목 (61-100일)
    case flowering = 5   // 꽃 피는 나무 (100일+)
}
```

#### Notification (알림)
```swift
struct Notification {
    let id: UUID
    let userId: UUID
    let type: NotificationType
    let title: String
    let body: String
    let isRead: Bool
    let createdAt: Date
}

enum NotificationType {
    case newQuestion
    case allAnswered
    case answerRequest
    case treeGrowth
    case badgeEarned
}
```

---

## 7. UI/UX 가이드라인

### 7.1 디자인 원칙
- **따뜻하고 편안한 느낌**: 가족 중심 앱이므로 부드럽고 친근한 톤
- **직관적인 인터페이스**: 부모 세대도 쉽게 사용할 수 있도록 단순하고 명확한 UI
- **시각적 피드백**: 나무 성장, 애니메이션 등으로 성취감 제공
- **접근성**: 큰 글자, 명확한 버튼, 고대비 옵션 제공

### 7.2 색상 팔레트
- **Primary**: 따뜻한 그린 (#4CAF50) - 나무, 성장을 상징
- **Secondary**: 부드러운 브라운 (#8D6E63) - 나무 줄기, 흙
- **Accent**: 밝은 오렌지 (#FF9800) - CTA 버튼
- **Background**: 아이보리 (#FFF8E1) - 따뜻한 배경
- **Text**: 다크 그레이 (#424242)

### 7.3 주요 화면 구성

#### 홈 화면
- 상단: 나무 비주얼 (현재 성장 단계)
- 중앙: 오늘의 질문 카드
- 하단: 구성원 답변 상태 (프로필 + 체크마크)
- 하단 탭바: 홈, 히스토리, 가족, 설정

#### 질문 답변 화면
- 질문 카드
- 텍스트 입력 필드 (최대 500자)
- 사진 첨부 버튼
- 임시 저장 버튼
- 답변 제출 버튼

#### 답변 공개 화면
- 구성원별 답변 카드 (스크롤)
- 각 카드: 프로필 사진, 이름, 역할, 답변, 사진, 반응 버튼
- 댓글 입력 영역

#### 나무 성장 화면
- 전체 화면 나무 비주얼
- 성장 진행 바
- 주요 마일스톤 타임라인
- 획득한 배지 목록

---

## 8. 개발 우선순위

### Phase 1: MVP (4-6주)
**목표**: 핵심 기능으로 사용 가능한 첫 버전

1. **인증 시스템** (1주)
   - 이메일 회원가입/로그인
   - 프로필 설정

2. **가족 그룹 & 구성원 관리** (1주)
   - 가족 그룹 생성
   - 초대 링크로 구성원 초대
   - 구성원 목록 확인

3. **질문-답변 시스템** (2주)
   - 일일 질문 제공 (매일 고정 시간)
   - 답변 작성 및 저장
   - 모든 구성원 답변 완료 시 공개
   - 구성원별 답변 확인

4. **기본 나무 시각화** (1주)
   - 씨앗 → 새싹 → 나무 3단계
   - 답변 횟수에 따른 성장

5. **기본 알림** (1주)
   - 새 질문 도착 알림
   - 답변 공개 알림

### Phase 2: 핵심 기능 강화 (3-4주)

1. **답변 요청 기능**
   - 미답변자에게 답변 요청 알림 전송

2. **나무 성장 고도화**
   - 6단계 성장 시스템
   - 성장 애니메이션

4. **과거 질문 아카이브**
   - 날짜별 질문/답변 히스토리
   - 캘린더 뷰

### Phase 3: 추가 기능 (2-3주)

1. **소셜 로그인**
   - Apple Sign In
   - Google Sign In

2. **사진 첨부**
   - 답변에 사진 첨부 기능

3. **알림 커스터마이징**
   - 알림 시간 설정
   - 알림 타입별 on/off

4. **통계 및 인사이트**
   - 가족 활동 통계
   - 가장 인상 깊었던 답변

### Phase 4: 고급 기능 (추후)

1. **질문 커스터마이징**
   - 가족이 직접 질문 추가

2. **다국어 지원**

3. **여러 가족 그룹 참여**
   - 한 사용자가 여러 가족 그룹 가입 가능

---

## 9. 성공 지표 (KPI)

### 9.1 사용자 지표
- **DAU (Daily Active Users)**: 일일 활성 사용자 수
- **가족 그룹 생성 수**: 총 생성된 가족 그룹 수
- **구성원 수**: 전체 가입 사용자 수
- **평균 가족 크기**: 가족 그룹당 평균 구성원 수

### 9.2 참여 지표
- **일일 답변 완료율**: 질문 도착 후 24시간 내 답변 비율
- **전체 답변 공개율**: 모든 구성원이 답변한 질문 비율
- **연속 답변 일수**: 평균 연속 답변 일수
- **답변 요청 사용률**: 답변 요청 기능 사용 빈도

### 9.3 리텐션 지표
- **D1 리텐션**: 가입 후 다음날 재방문율
- **D7 리텐션**: 가입 후 7일째 재방문율
- **D30 리텐션**: 가입 후 30일째 재방문율

### 9.4 참여도 지표
- **반응 사용률**: 답변에 반응 남긴 비율
- **댓글 작성률**: 댓글 작성 비율
- **나무 성장 단계 분포**: 각 성장 단계에 도달한 가족 비율

---

## 10. 리스크 및 대응 방안

### 10.1 사용자 참여 부족
**리스크**: 구성원 중 일부가 답변하지 않아 서비스 가치 하락
**대응**:
- 답변 요청 기능 강화
- 답변 소요 시간 단축 (간단한 질문, 짧은 답변 권장)
- 재미 요소 추가 (나무 성장, 배지 등)

### 10.2 세대 간 디지털 격차
**리스크**: 부모 세대가 앱 사용에 어려움을 느낌
**대응**:
- 초직관적인 UI/UX
- 온보딩 튜토리얼
- 큰 글자, 명확한 버튼

### 10.3 개인정보 보호
**리스크**: 가족 내 민감한 대화 내용 유출
**대응**:
- 엔드투엔드 암호화 고려
- 명확한 프라이버시 정책
- 가족 내에만 공개되는 폐쇄형 구조

---

## 11. 추후 확장 가능성

### 11.1 기능 확장
- **AI 질문 추천**: 가족의 답변 패턴 분석하여 맞춤 질문 제공
- **음성 답변**: 텍스트 대신 음성으로 답변
- **가족 앨범**: 답변 사진들을 모아 자동 앨범 생성
- **기념일 알림**: 가족 기념일 기록 및 특별 질문 제공

### 11.2 비즈니스 모델
- **프리미엄 구독**
  - 무제한 사진 첨부
  - 특별 질문 팩
  - 커스텀 나무 스킨
- **가족 굿즈**
  - 답변 모음 책자 제작 서비스
  - 나무 성장 그래프 액자

---

## 12. 타임라인 요약

| Phase | 기간 | 주요 기능 |
|-------|------|-----------|
| Phase 1 (MVP) | 4-6주 | 인증, 가족 그룹, 질문-답변, 기본 나무, 알림 |
| Phase 2 | 3-4주 | 답변 요청, 나무 고도화, 반응/댓글, 아카이브 |
| Phase 3 | 2-3주 | 소셜 로그인, 사진 첨부, 알림 커스터마이징 |
| Phase 4 | 추후 | 질문 커스터마이징, 다국어, 다중 그룹 |

**총 개발 기간**: 약 9-13주 (MVP + Phase 2 + Phase 3)


